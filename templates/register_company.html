{% extends 'base.html' %}
{% block content %}
<h3>Company Registration</h3>
{% if message %}
<div class="alert alert-success">{{ message }}</div>
{% endif %}
{% if error %}
<div class="alert alert-danger">{{ error }}</div>
{% endif %}

<div class="row">
  <div class="col-md-8">
    <form method="post" action="/register_company" class="card p-4">
      <h5 class="card-title">Register Your Company</h5>
      <div class="mb-3">
        <label class="form-label">Company Name *</label>
        <input class="form-control" name="company_name" required />
      </div>
      <div class="mb-3">
        <label class="form-label">Business Address</label>
        <textarea class="form-control" name="address" rows="3"></textarea>
      </div>
      <div class="mb-3">
        <label class="form-label">Phone Number</label>
        <input class="form-control" name="phone" />
      </div>
      <div class="mb-3">
        <label class="form-label">Email</label>
        <input class="form-control" name="email" type="email" />
      </div>
      <div class="mb-3">
        <label class="form-label">Tax Registration Number</label>
        <input class="form-control" name="tax_number" />
      </div>
      <div class="mb-3">
        <label class="form-label">Business License Number</label>
        <input class="form-control" name="license_number" />
      </div>
      <div class="mb-3">
        <label class="form-label">Website</label>
        <input class="form-control" name="website" />
      </div>
      <button class="btn btn-primary" type="submit">Register Company</button>
    </form>
  </div>
  
  <div class="col-md-4">
    {% if companies %}
    <div class="card">
      <div class="card-header">
        <h6>Registered Companies</h6>
      </div>
      <div class="card-body">
        {% for company in companies %}
        <div class="border-bottom pb-2 mb-2">
          <strong>{{ company.company_name }}</strong><br>
          <small class="text-muted">{{ company.phone }}</small><br>
          <small class="text-muted">{{ company.email }}</small>
          <form method="post" action="/company/delete" style="display:inline;">
            <input type="hidden" name="company_id" value="{{ company.company_id }}">
            <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete this company?')">Delete</button>
          </form>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>
</div>

<p class="mt-3"><a href="/">Back home</a></p>
{% endblock %}